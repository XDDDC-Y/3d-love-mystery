<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>异界信标 | 洵 · 豫</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=EB+Garamond:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 加载屏幕 -->
    <div id="loadingScreen" class="screen active">
        <div class="loading-content">
            <div class="eldritch-symbol"></div>
            <h1 class="loading-title">异界信标正在启动...</h1>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
                <span class="progress-text" id="progressText">0%</span>
            </div>
            <p class="loading-tip">警告：此空间存在异常认知干扰</p>
            <div class="terminal-hint">
                <p>> 系统检测到时间锚点：4.20 · 6.20</p>
                <p>> 记忆碎片正在重构...</p>
            </div>
        </div>
    </div>

    <!-- 主游戏容器 -->
    <div id="gameContainer" class="screen">
        <canvas id="gameCanvas"></canvas>
        
        <!-- 游戏UI -->
        <div id="gameUI">
            <!-- 交互提示 -->
            <div id="interactionHint" class="interaction-hint hidden">
                <i class="fas fa-hand-point-up"></i>
                <span id="hintText">按E键互动</span>
            </div>
            
            <!-- 物品栏 -->
            <div id="inventory" class="inventory hidden">
                <div class="inventory-title">已收集物品</div>
                <div class="inventory-items">
                    <!-- 物品会动态添加 -->
                </div>
            </div>
            
            <!-- 照片查看器 -->
            <div id="photoViewer" class="photo-viewer hidden">
                <div class="photo-container">
                    <img id="viewedPhoto" src="" alt="记忆碎片">
                    <div class="photo-caption" id="photoCaption"></div>
                    <button class="close-photo" onclick="closePhotoViewer()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <!-- 笔记系统 -->
            <div id="noteSystem" class="note-system hidden">
                <div class="note-header">
                    <h3>观测记录</h3>
                    <button class="close-note" onclick="closeNoteSystem()">✕</button>
                </div>
                <div class="note-content" id="noteContent">
                    <!-- 笔记内容动态添加 -->
                </div>
                <div class="note-input">
                    <textarea id="playerNote" placeholder="记录你的发现..."></textarea>
                    <button onclick="savePlayerNote()">保存</button>
                </div>
            </div>
            
            <!-- 健康值指示器（恐怖元素） -->
            <div id="sanityMeter" class="sanity-meter">
                <div class="sanity-label">认知稳定度</div>
                <div class="sanity-bar">
                    <div class="sanity-fill" id="sanityFill"></div>
                </div>
                <div class="sanity-value" id="sanityValue">100%</div>
            </div>
        </div>
        
        <!-- 暂停菜单 -->
        <div id="pauseMenu" class="pause-menu hidden">
            <div class="pause-content">
                <h2>时空裂缝</h2>
                <div class="pause-options">
                    <button onclick="resumeGame()">继续观测</button>
                    <button onclick="showSettings()">维度参数</button>
                    <button onclick="showHints()">认知援助</button>
                    <button onclick="quitToTitle()">脱离界面</button>
                </div>
                <div class="memory-stats">
                    <p>已收集碎片: <span id="collectedFragments">0</span>/7</p>
                    <p>异常接触次数: <span id="encounterCount">0</span></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 标题屏幕 -->
    <div id="titleScreen" class="screen">
        <div class="title-content">
            <div class="title-symbol">
                <div class="symbol-part"></div>
                <div class="symbol-part"></div>
                <div class="symbol-part"></div>
            </div>
            <h1 class="game-title">异界信标</h1>
            <p class="game-subtitle">洵 · 豫 · 记忆裂痕</p>
            
            <div class="title-menu">
                <button onclick="startNewGame()" class="menu-btn primary">
                    <i class="fas fa-play"></i> 开始观测
                </button>
                <button onclick="loadGame()" class="menu-btn" id="continueBtn" disabled>
                    <i class="fas fa-history"></i> 继续观测
                </button>
                <button onclick="showArchives()" class="menu-btn">
                    <i class="fas fa-archive"></i> 记忆档案
                </button>
                <button onclick="showSettings()" class="menu-btn">
                    <i class="fas fa-cog"></i> 维度参数
                </button>
            </div>
            
            <div class="title-hint">
                <p>警告：本体验包含认知异常现象</p>
                <p>建议佩戴耳机以获得完整效果</p>
            </div>
            
            <div class="developer-note">
                <p>致豫：每个谜题背后，都是我们真实的瞬间</p>
                <p class="signature">—— 洵</p>
            </div>
        </div>
    </div>
    
    <!-- 音频控制器 -->
    <div class="audio-controls">
        <button id="muteBtn" onclick="toggleMute()">
            <i class="fas fa-volume-up"></i>
        </button>
        <input type="range" id="volumeSlider" min="0" max="100" value="70">
    </div>
    
    <!-- 键盘提示 -->
    <div class="controls-hint">
        <p>WASD移动 | 鼠标观察 | E互动 | ESC菜单 | F全屏</p>
    </div>

    <!-- Three.js库 -->
    <script src="libs/three.min.js"></script>
    <script src="libs/TWEEN.min.js"></script>
    <script src="libs/GLTFLoader.js"></script>
    <script src="libs/OrbitControls.js"></script>
    <script src="libs/EffectComposer.js"></script>
    <script src="libs/RenderPass.js"></script>
    <script src="libs/ShaderPass.js"></script>
    <script src="libs/FilmPass.js"></script>
    
    <!-- 自定义模块 -->
    <script src="utils/PhotoManager.js"></script>
    <script src="utils/PuzzleSystem.js"></script>
    <script src="utils/AudioManager.js"></script>
    <script src="scenes/SceneManager.js"></script>
    
    <!-- 主逻辑 -->
    <script src="main.js"></script>
</body>
</html>